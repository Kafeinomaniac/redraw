{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 551a51b267e3b7009e5e","webpack:///./src/js/redraw.js","webpack:///./src/js/browser-api.js","webpack:///./src/js/canvas-wrapper.js","webpack:///./src/js/canvas-const.js","webpack:///./src/js/event-aggregator.js","webpack:///./src/js/controls/controls-dispatcher.js","webpack:///./src/js/tools/arrow.js","webpack:///./src/js/tools/box.js","webpack:///./src/js/tools/pixelate.js","webpack:///./src/js/tools/clear-tool.js","webpack:///./src/js/tools/horizontal-line-tool.js","webpack:///./src/js/tools/remove-tool.js","webpack:///./src/js/tools/text.js"],"names":[],"mappings":"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","file":"chart-test.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"rechart\"] = factory();\n\telse\n\t\troot[\"rechart\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 551a51b267e3b7009e5e\n **/","import Browser from './browser-api.js';\nimport Canvas from './canvas-wrapper.js';\nimport EventAggregator from './event-aggregator.js';\nimport ControlsDispatcher from './controls/controls-dispatcher.js';\n\n/**\n * Namespace-root, that will be set to window-Object.\n * @access private\n */\nvar redrawNs = {\n    tools: {}\n};\n\n/**\n * Makes a blob from eg base64-string.\n * @access private\n * @param data {string} encodedData - to encode\n * @returns {Blob} results\n */\nfunction dataURItoBlob(encodedData) {\n    var decodedData = atob(encodedData.split(',')[1]);\n    var array = []; // 8-bit unsigned array\n    for (var i = 0; i < decodedData.length; i++) {\n        array.push(decodedData.charCodeAt(i));\n    }\n    return new Blob([new Uint8Array(array)], {\n        type: 'image/png'\n    });\n}\n\n/**\n * If the user has defined the options.tools, then use this to\n * extract the sepcified subset from allTools.\n * @access private\n * @param {Object[]} allTools - should be tools to pick from.\n * @param {Object} options - with or without property tools.\n * @returns {Object} containing all or the selected tools.\n */\nfunction getToolsFromUserSettings(allTools, options) {\n\n    if (options && options.tools) {\n        var definedTools = {};\n        for (let t in options.tools) {\n            let toolName = options.tools[t];\n            definedTools[toolName] = allTools[toolName];\n        }\n        return definedTools;\n    } else {\n        return allTools;\n    }\n}\n\n/**\n * Defines the options-properties allowed to infect all tools-settings.\n * @access private\n */\nvar globalOverrides = ['color', 'activeColor'];\n\n/**\n * Figures out which options should be applied for a particular toolName.\n * @access private\n * @param {Object} allProps - already defined options, that shold not be lost, but perhaps\n * replaced if defined in precedenceProps or globalOptions.\n * @param {Object} precedenceProps - that may have a property named toolName, that will\n * replace options from allProps.\n * @param {Object} globalOptions - top-level options that will overwrite allProp but not precedenceProps \n * @param {string} toolName - name of the tool, which options is processed\n * @returns {Object} with tool applies options\n */\nfunction overwriteProps(allProps, precedenceProps, globalOptions, toolName) {\n    var results = {};\n\n    for (var p in allProps[toolName].options) {\n        if (allProps[toolName].options.hasOwnProperty(p)) {\n            if (precedenceProps[toolName] && precedenceProps[toolName] && precedenceProps[toolName].hasOwnProperty(p)) {\n                results[p] = precedenceProps[toolName][p];\n            } else if (globalOverrides.indexOf(p) > -1 && globalOptions.hasOwnProperty(p)){\n                results[p] = globalOptions[p];\n            } else {\n                results[p] = allProps[toolName].options[p];\n            }\n        }\n    }\n    return results;\n}\n\n/**\n * Main module, and the only public api for usage.\n * @module redraw\n */\nclass Redraw {\n    /**\n     * Redraw constructor. Bootstraps the canvas and tools.\n     * @constructor\n     * @param {Object} imgElement - The dom element that holds the image.\n     * @param {Object} options - Options.\n     */\n    constructor(imgElement, options) {\n        this.events = new EventAggregator();\n        options = options || {};\n        this._canvas = new Canvas(imgElement, this.events, options); // Needs defactor\n\n        if (options.jsonContent) {\n            this._canvas.loadFromJSON(options.jsonContent);\n        }\n\n        this.controls = this.initializeTools(this.events, options);\n    }\n    /**\n     * Get the png-representation of the canvas.\n     * @access public\n     * @returns {string} with base64 encoded png.\n     */\n    getDataUrlForExport() {\n        this._canvas.canvas.deactivateAllWithDispatch();\n        return this._canvas.canvas.toDataURL(\n            {\n                format:'png',\n                multiplier: 1/this._canvas.scale\n            });\n    }\n\n    /**\n     * Get the base64-encoded png-representation of the canvas.\n     * @access public\n     * @returns {string} with base64 encoded png.\n     */\n    toBase64URL() {\n        return this.getDataUrlForExport();\n    }\n\n    /**\n     * Get the binary png-representation of the canvas.\n     * @access public\n     * @returns {Blob} with canvas as png.\n     */\n    toDataBlob() {\n        return dataURItoBlob(this.getDataUrlForExport());\n    }\n\n    /**\n     * Get the json-representation of the canvas.\n     * @access public\n     * @param {boolean} includeImage - true if background-image should be included in the json.\n     * @returns {string} with json.\n     */\n    toJson(includeImage) {\n        this.controls.cancelActiveTool();\n        var jsObj = this._canvas.canvas.toObject(['lockMovementX', 'lockMovementY',\n            'lockRotation', 'lockScalingX', 'lockScalingY', 'lockUniScaling',\n            'hasControls', 'hasRotatingPoint', 'selectable', 'fill', 'padding']);\n\n        \n        if (!includeImage) {\n            delete jsObj.backgroundImage;\n        }\n        return JSON.stringify(jsObj);\n    }\n\n    /**\n     * Resets image and loads content from provided json.\n     * @access public\n     * @param {string} jsonRepresentation - to provide as current state of the canvas.\n     */\n    fromJson(jsonRepresentation) {\n        this._canvas.loadFromJSON(jsonRepresentation);\n    }\n\n    /**\n     * Tells whether or not any objects are present in the canvas, i.e. arrows, boxes other than the image itself.\n     * @access public\n     * @returns {boolean} true if there are obejcts, i.e.\n     */\n    isEmpty() {\n        return (this._canvas.getAllObjects().length === 0);\n    }\n\n    isDirty() {\n        return this._canvas.canvasIsDirty;\n    }\n    \n\n    /**\n     * Returns the canvas representation, as is from Fabric.js\n     * @access public\n     * @returns {Object} canvas, see http://fabricjs.com/.\n     */\n    getCanvas() {\n        return this._canvas.canvas;\n    }\n\n    on(topic, callbackFn, subscriberId, scope) {\n        this.events.subscribeTo(topic, 'cx-' + subscriberId, callbackFn, scope);\n    }\n\n    off(topic, subscriberId) {\n        this.events.unsubscribeTo(topic, 'cx-' + subscriberId);\n    }\n\n    /**\n     * Initializes all selected tools.\n     * @param {EventAggregator} events - used for all mediated communications.\n     * @param {Object} options - settings for all tools.\n     */\n    initializeTools(events, options) {\n        var localToolSettings = {};\n        options.toolSettings = options.toolSettings || {};\n        var toolsInUse = getToolsFromUserSettings(redrawNs.tools, options);\n\n        for (var toolName in toolsInUse) {\n            var passedProps = overwriteProps(redrawNs.tools, options.toolSettings, options, toolName);\n\n            redrawNs.tools[toolName].options = passedProps;\n\n            new redrawNs.tools[toolName].toolFn(this._canvas, events, passedProps);\n        }\n        var controls = new ControlsDispatcher(events, options);\n        controls.setupTools(toolsInUse, this._canvas.canvasContainer, options);\n        return controls;\n    }\n}\n\nredrawNs.Annotation = Redraw;\n/**\n * Used by tools to register themselves to be available for usage.\n * @access public\n * @param {string} _name - name of tool.\n * @param {function(canvas: CanvasWrapper, events: EventAggregator, passedProps: Object)} _toolFn - callback function, invoked upon initialization of the tools.\n * @param {Object} _options - options, to be used as default ones.\n */\nredrawNs.registerTool = function(_name, _toolFn, _options) {\n    redrawNs.tools[_name] = {\n        address: _name,\n        toolFn: _toolFn,\n        options: _options\n    };\n    // buttonCss is an attribute that applies to all tools\n    redrawNs.tools[_name].options.buttonCss = redrawNs.tools[_name].options.buttonCss || '';\n};\n\n(new Browser()).appendToWindow('redraw', redrawNs);\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/redraw.js\n **/","var isBrowser = typeof window !== 'undefined';\n\n/**\n * Facade of the browser apis. The main purpose id to facilitate testing.\n */\nexport default class Browser {\n    /**\n     * Contructor that determines if there is a browser present.\n     * @constructor\n     */\n    constructor() {\n        this.document = isBrowser ? document : {};\n        this.window = isBrowser ? window : {};\n    }\n\n    /**\n     * Appends property to the browser window object.\n     * @param {string} attributeName - Name of the property to create/assign.\n     * @param {Object} obj - value to set.\n     */\n    appendToWindow(attributeName, obj) {\n\n        if (isBrowser) {\n            window[attributeName] = obj;\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Use to retrieve property from the browser window object.\n     * @param {string} attributeName - Name of the property to create/assign.\n     * @returns {Object} obj - retrieved value, or mock if not browser.\n     */\n    getFromWindow(attributeName) {\n        if (window) {\n            return window[attributeName];\n        }\n      return {\n        getFromWindow:function() { },\n          tools: []};\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/browser-api.js\n **/","import CONST from './canvas-const.js';\n\n /**\n * Gets the scroll position of a dom element.\n * @access private\n * @param {Object} elem - target element.\n */\nfunction scrollPosition(elem) {\n    var left = 0,\n        top = 0;\n\n    do {\n        left += elem.scrollLeft;\n        top += elem.scrollTop;\n    } while (elem = elem.offsetParent);\n\n    return [left, top];\n}\n\nfunction setupListener(fabricCanvas, canvasWrapper) {\n    function canvasIsDirty() {\n        canvasWrapper.canvasIsDirty = true;\n        fabricCanvas.off('object:added', canvasIsDirty);\n        fabricCanvas.off('object:selected', canvasIsDirty);\n    }\n    fabricCanvas.off('object:added', canvasIsDirty);\n    fabricCanvas.off('object:selected', canvasIsDirty);\n    canvasWrapper.canvasIsDirty = false;\n\n    fabricCanvas.on('object:added', canvasIsDirty);\n    fabricCanvas.on('object:selected', canvasIsDirty);\n}\n/**\n * Canvas object that facilitates \n */\nexport default class Canvas {\n     /**\n     * Tools contructor. Is provided with canvas-wrapper and eventAggregator by contract.\n     * @constructor\n     * @param {Object} imgElement - dom element that will be replaced and\n     * used as background for canvas.\n     * @param {EventAggregator} eventAggregator - Event mediator.\n     * @param {Object} options - parameters used to setup looks and all tools preferences.\n     */\n    constructor(imgElement, eventAggregator, options) {\n        this.options = options;\n        this.eventAggregator = eventAggregator;\n        var parent = imgElement.parentNode;\n        var canvasWrapper = document.createElement(\"div\");\n        canvasWrapper.className = CONST.CSS.PARENT;\n        this.scale = 1;\n        parent.insertBefore(canvasWrapper, imgElement);\n        parent.removeChild(imgElement);\n\n        var canvasElem = document.createElement(\"canvas\");\n        canvasWrapper.appendChild(canvasElem);\n\n        this.canvasElem = canvasElem;\n\n        this.canvasContainer = canvasWrapper;\n        this.canvasLeft = canvasElem.offsetLeft;\n        this.canvas = new fabric.Canvas(canvasElem);\n        this.imgElement = imgElement;\n\n        /* wait until the image is surely loaded to make the setup */\n        let theCanvas = this;\n        let delayedSetup = function () {\n            theCanvas.setupImage();\n        };\n        var tmp = new Image();\n        tmp.addEventListener('load', delayedSetup, false);\n        tmp.src = this.imgElement.src;\n        setupListener(this.canvas, this);\n    }\n\n    setupImage() {\n        this.image = new fabric.Image(this.imgElement);\n        if (this.options.maxWidth && this.options.maxWidth < this.image.width) {\n            this.scale = this.options.maxWidth / this.image.width;\n        }\n        if (this.options.maxHeight && this.options.maxHeight < this.image.height) {\n            let scaleY = this.options.maxHeight / this.image.height;\n            if (this.scale > scaleY) {\n                this.scale = scaleY;\n            }\n        }\n\n        this.width = this.scale * this.imgElement.width;\n        this.height = this.scale * this.imgElement.height;\n\n        this.canvas.setDimensions({\n            width: this.width,\n            height: this.height\n        });\n\n        this.image.setScaleX(this.scale);\n        this.image.setScaleY(this.scale);\n        var event = this.eventAggregator;\n        function getBinder(_canvas) {\n            return function(){\n                _canvas.renderAll();\n                event.notify('canvas-loaded', 'CANVAS');\n            };\n        }\n        this.canvas.setBackgroundImage(this.image, getBinder(this.canvas), {});\n\n        if (this.options.maxWidth && this.options.maxWidth < this.image.width) {\n            this.scale = this.options.maxWidth / this.image.width;\n        }\n        if (this.options.maxHeight && this.options.maxHeight < this.image.height) {\n            let scaleY = this.options.maxHeight / this.image.height;\n            if (this.scale > scaleY) {\n                this.scale = scaleY;\n            }\n        }\n\n        this.eventAggregator.subscribeTo('TOOL_USAGE', 'toolbar',\n            function(subscriptionId, sender, status) {\n                if (status === 'active') {\n                    this.canvas.defaultCursor='crosshair';\n                } else {\n                    this.canvas.defaultCursor='default';\n                }\n            }, this);\n    }\n\n    loadFromJSON(jsonContent) {\n        this.canvas.clear();\n        this.canvas.loadFromJSON(jsonContent, this.canvas.renderAll.bind(this.canvas));\n        setupListener(this.canvas, this);\n    }\n\n    /**\n     * Gets the top position of the canvas dom element.\n     * @access public\n     * @returns {number} position in pixels?\n     */\n    getCanvasTop() {\n        return this.canvasContainer.offsetTop;\n    }\n\n    /**\n     * Gets the array of all objects of the canvas.\n     * @access public\n     * @returns {Array} with canvas object, or undefined if empty.\n     */\n    getAllObjects() {\n        return this.canvas.getObjects();\n    }\n\n    /**\n     * Set/unset whether or not it is possible to select objects of the canvas.\n     * @access pulic\n     * @param {boolean} isEnabled - true if selection is enabled, false otherwise.\n     */\n    enableSelection(isEnabled) {\n        this.canvas.selection = isEnabled; // Restore fabricjs selection-box\n        this.canvas.forEachObject(function(o) {\n            o.selectable = isEnabled;\n        });\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/canvas-wrapper.js\n **/","export default {\n\tTOOL: {\n\t\tARROW:'arrow',\n\t\tBOX:'box',\n\t\tPIXELATE:'pixel',\n\t\tCLEAR:'clear',\n\t\tDUMP:'dump',\n\t\tHLINE:'hline',\n\t\tREMOVE:'delete',\n\t\tTEXT:'text'\n\t},\n\tDEFAULT_COLOR: '#33e',\n\tCSS: {\n\t\tPARENT:'redraw_parent',\n\t\tTOOLBAR:'redraw_toolbar',\n\t\tBUTTON:'redraw_btn',\n\t\tACTIVE_BUTTON:'active'\n\t}\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/canvas-const.js\n **/","/**\n* Mediator for events.\n*/\nexport default class EventAggregator {\n    /**\n     * Contructor that initializes internal stuff.\n     * @constructor\n     */\n    constructor() {\n        this.subscriptionsByTopic = {};\n    }\n\n    /**\n     * Registers a subscriber for a specific event topic.\n     * @param {string} topic - name of the event type / topic.\n     * @param {string} subscriberId - id the subscriber, must be unique.\n     * @param {function(topic: string, sender: string, payload: Object)} onNotifyFn - callback\n     * invoked upon when upon notification.\n     * @param {Object} [_invokationScope] - scope to be used when invoking callback.\n     */\n    subscribeTo(topic, subscriberId, onNotifyFn, _invokationScope) {\n        if (!this.subscriptionsByTopic[topic]) {\n            this.subscriptionsByTopic[topic] = [];\n        }\n\n        this.subscriptionsByTopic[topic].push({subscriber: subscriberId, callbackFn: onNotifyFn, invokationScope: _invokationScope});\n    }\n\n    // ToDo needs test\n    /**\n     * Unregisters a subscriber from a specific event topic.\n     * @param {string} topic - name of the event type / topic.\n     * @param {string} _subscriber - id the unique subscriber.\n     */\n    unsubscribeTo(topic, _subscriber) {\n        for (var j in this.subscriptionsByTopic[topic]) {\n            if (this.subscriptionsByTopic[topic][j].subscriber === _subscriber) {\n                this.subscriptionsByTopic[topic].splice(j, 1);\n            }\n        }\n    }\n\n    /**\n     * Called to notify all subscribers of this topic\n     * @param {string} topic - name of the event type / topic.\n     * @param {string} sender - address of the sender.\n     * @param {Object} payload - any data to pass to the subscriber.\n     */\n    notify(topic, sender, payload) {\n        for (var s2 in this.subscriptionsByTopic[topic]) {\n            var scope = undefined;\n            if (this.subscriptionsByTopic[topic][s2].invokationScope) {\n                scope = this.subscriptionsByTopic[topic][s2].invokationScope;\n            }\n            this.subscriptionsByTopic[topic][s2].callbackFn.apply(scope, [topic, sender, payload]);\n        }\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/event-aggregator.js\n **/","import CONST from '../canvas-const.js';\n\n/**\n * Css class for all buttons of the toolbar.\n */\nconst BUTTON_CLASS = 'redraw_btn';\n\n/**\n * Adds a class to the array of classes.\n * @private\n */\nfunction addClasses(btnObj, classes) {\n    if (!classes) return;\n    var allClasses = classes.split(' ');\n\n    allClasses.forEach((clazz) => {btnObj.classList.add(clazz);})\n}\n\n/**\n * Main manager for the toolbar.\n */\nexport default class ControlsDispatcher {\n    /**\n     * Controls contructor. Is provided with canvas-wrapper and options to initialize to toolbar.\n     * @constructor\n     * @param {EventAggregator} eventAggregator - Event mediator.\n     * @param {Object} options - from user.\n     */\n    constructor(eventAggregator, options) {\n        this.toolsInUse = {};\n        var activeTool, delBtn;\n\n        function notifyActive(topic) {\n            return function() {\n                if (activeTool) {\n                    eventAggregator.notify(activeTool, 'toolbar', 'toolbar-deactivate');\n                }\n                if (activeTool !== topic) {\n                    activeTool = topic;\n                    eventAggregator.notify(topic, 'toolbar', 'toolbar-click');\n                } else {\n                    activeTool = undefined;\n                }\n            };\n        }\n\n        this.cancelActiveTool = function() {\n\n            if (activeTool) {\n                eventAggregator.notify(activeTool, 'toolbar', 'toolbar-deactivate');\n                activeTool = undefined;\n            }\n        };\n\n        var manageKeys = function(e) {\n            if (e.keyCode === 46 || e.keyCode === 27) {\n                eventAggregator.notify('keydown', 'toolbar', e.keyCode);\n            }\n        };\n\n        window.addEventListener('keydown', manageKeys, false);\n\n        this.setupTools = function(tools, domParent, mainOptions) {\n            var container = document.createElement('div');\n\n            addClasses(container, CONST.CSS.TOOLBAR);\n            addClasses(container, options.toolbarCss);\n\n            if (mainOptions.toolbarFirst === true) {\n                domParent.insertBefore(container, domParent.firstChild);\n            } else {\n                domParent.appendChild(container);\n            }\n\n            for (var toolName in tools) {\n                var btn = document.createElement('button');\n                btn.innerHTML = tools[toolName].options.label;\n\n                btn.classList.add(CONST.CSS.BUTTON);\n\n                addClasses(btn, mainOptions.buttonCss);\n                addClasses(btn, tools[toolName].options.buttonCss);\n\n                btn.onclick = notifyActive(tools[toolName].address);\n                this.toolsInUse[tools[toolName].address] = btn;\n                container.appendChild(btn);\n            }\n\n            var btnActiveCss = mainOptions.buttonActiveCss || CONST.CSS.ACTIVE_BUTTON;\n\n            eventAggregator.subscribeTo('TOOL_USAGE', 'toolbar',\n                function(subscriptionId, sender, status) {\n                    var currTool = this.toolsInUse[sender];\n\n                    if (status !== 'active') {\n                        if (sender === activeTool) {\n                            activeTool = undefined;\n                        }\n                        currTool.classList.remove(btnActiveCss);\n                    } else {\n                        currTool.classList.add(btnActiveCss);\n                    }\n                }, this);\n\n            eventAggregator.subscribeTo('tool-enabled', 'toolbar',\n                function(subscriptionId, sender, isEnabled) {\n                    if (isEnabled) {\n                        this.toolsInUse[sender].classList.remove('disabled');\n                    } else {\n                        this.toolsInUse[sender].classList.add('disabled');\n                    }\n                }, this);\n        };\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controls/controls-dispatcher.js\n **/","import CONST from '../canvas-const.js';\nimport Browser from '../browser-api.js';\n\n/** length of arrow head */\nvar indicationLength = 20;\n/** line used during drag n drop */\nvar line;\n\n/**\n * A tool to paint arrows.\n */\nexport default class ArrowTool {\n    /**\n     * Tools contructor. Is provided with canvas-wrapper and eventAggregator by contract.\n     * @constructor\n     * @param {Canvas} canvasWrapper - Canvas.\n     * @param {EventAggregator} eventAggregator - Event mediator.\n     */\n    constructor(canvasWrapper, eventAggregator, toolOptions, fabric) {\n        console.log('##### alpha *******************');\n        /** eventAggregator for madiated cummunications */\n        this.eventAggregator = eventAggregator;\n        /** main api to use for canvas manipulation */\n        this.canvasWrapper = canvasWrapper;\n        /** coords for the elements of the arrow */\n        this.arrow = this.canvas = this.start = this.end = undefined;\n        /** options */\n        this.options = toolOptions;\n\n        var callee = this;\nconsole.log('##### bravo');\n\n        this.eventAggregator.subscribeTo(\n            CONST.TOOL.ARROW,\n            'ArrowTool',\n            function() {\n                callee.initListeners.apply(callee, arguments);\n            });\n        /** shorthand to canvas */\n        this.canvas = canvasWrapper.canvas;\n\n        this.moveFn = function(options) {\n            callee.onMove(options);\n        };\n        this.downFn = function(options) {\n            callee.onMouseDown(options);\n        };\n        this.upFn = function(options) {\n            callee.onMUP(options);\n        };\n        this.notify = function(message) {\n            this.eventAggregator.notify('TOOL_USAGE', CONST.TOOL.ARROW, message);\n        };\n\n        this.done = function() {\n            this.canvasWrapper.enableSelection(true);\n            this.removeCanvasListeners();\n            this.notify('inactive');\n        };\n        console.log('##### charlie');\n    }\n\n    /**\n     * Move the head of the arrow.\n     * Cred for http://stackoverflow.com/questions/29890294/arrow-shape-using-fabricjs\n     * @private\n     * @param {Object} points - 4d.\n     */\n    moveArrowIndicator(points) {\n        var x1 = points[0],\n            y1 = points[1],\n            x2 = points[2],\n            y2 = points[3],\n\n            dx = x2 - x1,\n            dy = y2 - y1,\n\n            angle = Math.atan2(dy, dx);\n\n        angle *= 180 / Math.PI;\n        angle += 90;\n        if (this.arrow) {\n            this.canvas.remove(this.arrow);\n        }\n        this.arrow = new fabric.Triangle({\n            angle: angle,\n            fill: this.options.activeColor,\n            top: y2,\n            left: x2,\n            height: indicationLength,\n            width: indicationLength,\n            originX: 'center',\n            originY: 'center',\n            selectable: false\n        });\n\n        this.canvas.add(this.arrow);\n    }\n\n    /**\n     * Cancels this paint operation, i.e. removes any ongoing paint-objects och de-registers listeners.\n     * @private\n     */\n    abort() {\n        if (this.arrow) {\n            this.canvas.remove(this.arrow);\n            this.arrow = undefined;\n        }\n        if (line) {\n            this.canvas.remove(line);\n            line = undefined;\n        }\n        this.eventAggregator.unsubscribeTo('keydown', 'ArrowTool');\n        this.done();\n    }\n\n    /**\n     * Function callback, invoked when mouse moves, even before mouse has been pressed.\n     * @private\n     * @param {Object} options - for the event.\n     */\n    onMove(options) {\n\n        if (this.start && !this.end) {\n            let pointer = this.canvas.getPointer(options.e);\n\n            line.set({\n                'x2': pointer.x\n            });\n            line.set({\n                'y2': pointer.y\n            });\n\n            this.moveArrowIndicator([this.start.left, this.start.top, pointer.x, pointer.y]);\n        }\n\n        this.canvas.renderAll();\n    }\n\n    /**\n     * Function callback, invoked on mouse up.\n     * @private\n     * @param {Object} options - for the event.\n     */\n    onMUP(options) {\n        let pointer = this.canvas.getPointer(options.e);\n        this.end = {\n            top: pointer.y,\n            left: pointer.x\n        };\n\n        var perimeter = Math.abs(this.end.top - this.start.top) + Math.abs(this.end.left - this.start.left);\n\n        if (perimeter > 10) {\n            if (this.arrow) {\n                this.arrow.fill = this.options.color;\n            }\n            var group = new fabric.Group([line, this.arrow], {\n                hasControls: false,\n                hasBorders: true,\n                selectable: false,\n                fill: this.options.color\n            });\n            line.stroke = this.options.color;\n\n            this.canvas.add(group);\n        }\n\n        this.canvas.remove(line);\n        this.canvas.remove(this.arrow);\n        this.arrow = line = this.start = this.end = undefined;\n        this.canvas.renderAll();\n    }\n\n    /**\n     * Function callback, invoked on mouse down.\n     * @private\n     * @param {Object} options - for the event.\n     */\n    onMouseDown(options) {\n        let pointer = this.canvas.getPointer(options.e);\n        this.start = {\n            top: pointer.y,\n            left: pointer.x\n        };\n\n\n        line = new fabric.Line([this.start.left, this.start.top, this.start.left, this.start.top], {\n            strokeWidth: 5,\n            stroke: this.options.activeColor,\n            originX: 'center',\n            originY: 'center',\n            hasControls: false,\n            hasBorders: true,\n            selectable: true\n        });\n\n        this.canvas.add(line);\n    }\n\n    /**\n     * Function callback, invoked when toolbar is clicked.\n     * @private\n     * @param {string} topic - .\n     * @param {string} sender - .\n     * @param {string} payload - value shold be \"toolbar-deactivate\" if tool is active.\n     */\n    initListeners(topic, sender, payload) {\n        if (payload === 'toolbar-deactivate'){\n            this.abort();\n            return;\n        }\n        var me = this;\n\n        this.eventAggregator.subscribeTo('keydown', 'ArrowTool',\n            function(topic, sender, keyCode) {\n\n                if (keyCode === 27) {\n                    me.abort.apply(me);\n                }\n            });\n        this.start = this.end = undefined;\n\n        this.canvasWrapper.enableSelection(false);\n\n        this.notify('active');\n\n        this.canvas.on('mouse:down', this.downFn);\n        this.canvas.on('mouse:move', this.moveFn);\n        this.canvas.on('mouse:up', this.upFn);\n    }\n    /**\n     * Removes listeners.\n     * @private\n     */\n    removeCanvasListeners() {\n        this.canvas.off('mouse:down', this.downFn);\n        this.canvas.off('mouse:move', this.moveFn);\n        this.canvas.off('mouse:up', this.upFn);\n    }\n}\n/** Default options for tools initialization */\nvar toolProps = {\n    label: 'Arrow',\n    color:CONST.DEFAULT_COLOR,\n    activeColor:'#55f'\n};\nBrowser.getFromWindow('redraw').registerTool(CONST.TOOL.ARROW, ArrowTool, toolProps);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/tools/arrow.js\n **/","import CONST from '../canvas-const.js';\nimport Browser from '../browser-api.js';\n\n/** used during drag n drop */\nvar rect;\n/**\n * A tool to paint boxes.\n */\nexport default class BoxTool {\n    /**\n     * Tools contructor. Is provided with canvas-wrapper and eventAggregator by contract.\n     * @constructor\n     * @param {Canvas} canvasWrapper - Canvas.\n     * @param {EventAggregator} eventAggregator - Event mediator.\n     */\n    constructor(canvasWrapper, eventAggregator, toolOptions) {\n\n        eventAggregator.subscribeTo(CONST.TOOL.BOX, 'BoxTool', attachBoxListener);\n        var callbackCtx = this;\n        let canvas = canvasWrapper.canvas;\n\n        function notify(message) {\n            eventAggregator.notify('TOOL_USAGE', CONST.TOOL.BOX, message);\n        }\n\n        function done() {\n            notify('inactive');\n            detachBoxListener();\n            canvasWrapper.enableSelection(true);\n        }\n\n        function detachBoxListener() {\n            \n                canvas.off('mouse:down', mouseDown);\n                canvas.off('mouse:move', drawBox);\n                canvas.off('mouse:up', drawBoxDone);\n                \n                rect = undefined;\n                eventAggregator.unsubscribeTo('keydown', 'BoxTool');\n            \n        }\n        var currWidth, currHeight;\n\n        function drawBox(options) {\n            if (rect) {                \n                let pointer = canvas.getPointer(options.e);\n\n                currWidth = pointer.x - startLeft;\n                currHeight = pointer.y - startTop;                \n\n                rect.set({\n                    'width': currWidth\n                });\n                rect.set({\n                    'height': currHeight\n                });\n                rect.setCoords();\n                canvas.renderAll();\n            }\n        }\n        function drawBoxDone(options) {\n            canvas.off('mouse:move', drawBox);\n            canvas.off('mouse:up', drawBoxDone);\n\n            if (Math.abs(currWidth) < 5 && Math.abs(currHeight) < 5) {\n                canvas.remove(rect);\n                return;\n            }\n\n            rect.set({opacity: 0.5});\n            canvas.renderAll();\n        }\n\n        var currWidth, currHeight, startTop, startLeft;\n\n        function mouseDown(options) {\n            let pointer = canvas.getPointer(options.e);\n            currWidth = currHeight = 0;\n\n            startTop = pointer.y;\n            startLeft = pointer.x;\n\n            rect = new fabric.Rect({\n                left: startLeft,\n                top: startTop,\n                width: 4,\n                borderColor: toolOptions.color,\n                height: 4,\n                fill: toolOptions.color,\n                opacity: 0.3,\n                hasControls: true,\n                hasRotatingPoint:false,\n                originX:'left',\n                originY:'top',\n                selectable: false\n            });\n\n            canvas.add(rect);\n            rect.setCoords();\n            canvas.renderAll();\n            canvas.on('mouse:move', drawBox);\n            canvas.on('mouse:up', drawBoxDone);\n        }\n\n        function attachBoxListener(topic, sender, payload) {\n            if (payload === 'toolbar-deactivate'){\n                done();\n                return;\n            }\n            eventAggregator.subscribeTo('keydown', 'BoxTool', function(topic, sender, keyCode) {\n                if (keyCode === 27) {\n                    done();\n                }\n            }, callbackCtx);\n            canvasWrapper.enableSelection(false);\n            notify('active');\n            \n            canvas.on('mouse:down', mouseDown);\n        }\n    }\n}\n/**\n * Default options.\n */\nvar defaultToolProps = {\n    label: 'Box',\n    color:CONST.DEFAULT_COLOR\n};\n\n(new Browser()).getFromWindow('redraw').registerTool(CONST.TOOL.BOX, BoxTool, defaultToolProps);\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/tools/box.js\n **/","import CONST from '../canvas-const.js';\nimport Browser from '../browser-api.js';\n\n/**\n * A tool to pixelate areas.\n */\nexport default class PixelateTool {\n    /**\n     * Tools contructor. Is provided with canvas-wrapper and eventAggregator by contract.\n     * @constructor\n     * @param {Canvas} canvasWrapper - Canvas.\n     * @param {EventAggregator} eventAggregator - Event mediator.\n     */\n    constructor(canvasWrapper, eventAggregator, toolOptions) {\n\n        eventAggregator.subscribeTo(CONST.TOOL.PIXELATE, 'PixelateTool', attachBoxListener);\n        let rect, callbackCtx = this;\n        let startTop, startLeft;\n        let canvas = canvasWrapper.canvas;\n\n        function notify(message) {\n            eventAggregator.notify('TOOL_USAGE', CONST.TOOL.PIXELATE, message);\n        }\n\n        function done() {\n            notify('inactive');\n            detachBoxListener();\n            canvasWrapper.enableSelection(true);\n        }\n\n        function detachBoxListener() {\n            canvas.off('mouse:down', mouseDown);\n            canvas.off('mouse:move', drawBox);\n            canvas.off('mouse:up', drawBoxDone);\n\n            rect = undefined;\n            eventAggregator.unsubscribeTo('keydown', 'PixelateTool');\n        }\n        \n\n        function drawBox(options) {\n            if (rect) {                \n                let pointer = canvas.getPointer(options.e);\n\n                let currWidth = pointer.x - startLeft;\n                let currHeight = pointer.y - startTop;                \n\n                rect.set({\n                    'width': currWidth,\n                    'height': currHeight\n                });\n\n                rect.setCoords();\n                canvas.renderAll();\n            }\n        }\n\n        function applyFilter(index, filter, obj) {\n            obj.filters[index] = filter;\n            obj.applyFilters(canvas.renderAll.bind(canvas));\n        }\n\n        function drawBoxDone(options) {\n            canvas.off('mouse:move', drawBox);\n            canvas.off('mouse:up', drawBoxDone);\n            canvas.remove(rect);\n\n            let pointer = canvas.getPointer(options.e);\n            let currWidth = pointer.x - startLeft;\n            let currHeight = pointer.y - startTop;\n\n            if (Math.abs(currWidth) > 0 && Math.abs(currHeight) > 0) {\n                var pixels = canvas.getContext().getImageData(pointer.x, pointer.y, currWidth, currHeight);\n\n                var object = fabric.util.object.clone(canvasWrapper.image);\n\n                object.set({\n                    originX: 'left',\n                    originY: 'top',\n                    left: 0,\n                    top: 0,\n                    lockMovementX:true,\n                    lockMovementY:true\n                });\n                var x = rect;\n\n                rect.left = rect.left - object.width / 2;\n                rect.top = rect.top - object.height / 2;\n\n                object.clipTo = function(ctx) {\n                    x.render(ctx);\n                };\n\n                var f = fabric.Image.filters;\n                applyFilter(0, new f.Pixelate({\n                    blocksize: 5\n                }), object);\n\n                canvas.add(object);\n                canvas.sendToBack(object);\n            }\n            canvas.renderAll();\n\n            rect = undefined;\n        }\n\n        \n\n        function mouseDown(options) {\n            let pointer = canvas.getPointer(options.e);\n\n            startTop = pointer.y;\n            startLeft = pointer.x;\n\n            rect = new fabric.Rect({\n                left: startLeft,\n                top: startTop,\n                width: 4,\n                borderColor: toolOptions.color,\n                height: 4,\n                fill: toolOptions.color,\n                opacity: 0.3,\n                hasControls: true,\n                hasRotatingPoint:false,\n                originX:'left',\n                originY:'top',\n                selectable: false\n            });\n\n            canvas.add(rect);\n            rect.setCoords();\n            canvas.renderAll();\n            canvas.on('mouse:move', drawBox);\n            canvas.on('mouse:up', drawBoxDone);\n        }\n\n        function attachBoxListener(topic, sender, payload) {\n            if (payload === 'toolbar-deactivate'){\n                done();\n                return;\n            }\n            eventAggregator.subscribeTo('keydown', 'PixelateTool', function(topic, sender, keyCode) {\n                if (keyCode === 27) {\n                    done();\n                }\n            }, callbackCtx);\n            canvasWrapper.enableSelection(false);\n            notify('active');\n            \n            canvas.on('mouse:down', mouseDown);\n        }\n    }\n}\n/**\n * Default options.\n */\nvar defaultToolProps = {\n    label: 'Pixelate',\n    color:CONST.DEFAULT_COLOR\n};\n\n(new Browser()).getFromWindow('redraw').registerTool(CONST.TOOL.PIXELATE, PixelateTool, defaultToolProps);\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/tools/pixelate.js\n **/","import CONST from '../canvas-const.js';\nimport Browser from '../browser-api.js';\n\n/**\n * A tool to reset the canvas, i.e. remove all objects.\n */\nexport default class ResetTool {\n    /**\n     * Tools contructor. Is provided with canvas-wrapper and eventAggregator by contract.\n     * @constructor\n     * @param {Canvas} canvasWrapper - Canvas.\n     * @param {EventAggregator} eventAggregator - Event mediator.\n     */\n    constructor(canvasWrapper, eventAggregator) {\n    \teventAggregator.subscribeTo(CONST.TOOL.CLEAR, 'ResetTool', initClear);\n\t\tfunction initClear(topic, sender, payload) {\n\t\t\tif (payload !== 'toolbar-deactivate' &&\n\t\t\t\tconfirm('This will restore your image to its default state.\\nAll your modifications will be deleted.\\nDo you want to continue?')) {\n\t\t\t\tclearAllElements();\n\t\t\t}\n\t\t\teventAggregator.notify('TOOL_USAGE', CONST.TOOL.CLEAR, 'inactive');\n\t\t}\t\n\n\t\tfunction clearAllElements() {\n\t\t\tvar c = canvasWrapper.canvas;\n\t\t\tvar all = c.getObjects();\n\t\t\tfor (var i = all.length - 1; i >= 0; i--) {\n\t\t\t\tc.remove(all[i]);\n\t\t\t}\n\t\t}\n    }\n}\nvar toolProps = {\n    label: 'Clear'\n};\n\n(new Browser()).getFromWindow('redraw').registerTool(CONST.TOOL.CLEAR, ResetTool, toolProps);\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/tools/clear-tool.js\n **/","import CONST from '../canvas-const.js';\nimport Browser from '../browser-api.js';\n\n/**\n * A tool to create horizontal lines.\n */\nexport default class HorizontalLineTool {\n    /**\n     * Tools contructor. Is provided with canvas-wrapper and eventAggregator by contract.\n     * @constructor\n     * @param {Canvas} canvasWrapper - Canvas.\n     * @param {EventAggregator} eventAggregator - Event mediator.\n     */\n    constructor(canvasWrapper, eventAggregator, toolOptions) {\n        var canvas = canvasWrapper.canvas;\n        var horizontalLine;\n        eventAggregator.subscribeTo(CONST.TOOL.HLINE, 'HorizontalLineTool', HorizontalLineTool);\n\n        function notify(message) {\n            eventAggregator.notify('TOOL_USAGE', CONST.TOOL.HLINE, message);\n        }\n\n        function createHorizontalLine() {\n\n            return new fabric.Line([0, 0, canvas.width, 0], {\n                left: 0,\n                top: 1,\n                hasControls: false,\n                lockMovementX: true,\n                opacity: 0.7,\n                padding: 4,\n                stroke: toolOptions.color,\n                strokeWidth: 2\n            });\n        }\n\n        function HorizontalLineTool(addr, sender, action) {\n            if (action !== 'toolbar-click') {\n                abort();\n                return;\n            }\n\n            notify('active');\n\n            horizontalLine = createHorizontalLine();\n            canvas.add(horizontalLine);\n\n            eventAggregator.subscribeTo('keydown', 'HorizontalLine', function(topic, sender, keyCode) {\n                if (keyCode === 27) {\n                    abort();\n                }\n            });\n\n            function abort() {\n                canvas.remove(horizontalLine);\n                horizontalLine = undefined;\n                // TODO unsubscribe\n\n                detachHorizontalLineListener();\n                notify('inactive');\n            }\n\n            var onMouseMove = function(options) {\n                if (horizontalLine) {\n                    horizontalLine.set({\n                        'top': canvas.getPointer(options.e).y\n                    });\n\n                    horizontalLine.setCoords();\n                    canvas.renderAll();\n                }\n            };\n            canvas.on('mouse:move', onMouseMove);\n\n            var onMouseUp = function(options) {\n                horizontalLine = createHorizontalLine();\n                canvas.add(horizontalLine);\n            };\n            canvas.on('mouse:up', onMouseUp);\n\n            function detachHorizontalLineListener() {\n                canvas.off('mouse:move', onMouseMove);\n                canvas.off('mouse:up', onMouseUp);\n            }\n\n        };\n    }\n}\nvar toolProps = {\n    label: 'Limit line',\n    color:CONST.DEFAULT_COLOR,\n    activeColor:'#55f'\n};\n\n(new Browser()).getFromWindow('redraw').registerTool(CONST.TOOL.HLINE, HorizontalLineTool, toolProps);\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/tools/horizontal-line-tool.js\n **/","/**\n * A tool to remove selected elements from canvas!\n */\nimport CONST from '../canvas-const.js';\nimport Browser from '../browser-api.js';\n\n/**\n * A tool to remove selected elements from canvas.\n */\nexport default class RemoveTool {\n    /**\n     * Tools contructor. Is provided with canvas-wrapper and eventAggregator by contract.\n     * @constructor\n     * @param {Canvas} canvasWrapper - Canvas.\n     * @param {EventAggregator} eventAggregator - Event mediator.\n     */\n    constructor(canvasWrapper, eventAggregator) {\n        eventAggregator.notify('tool-enabled', CONST.TOOL.REMOVE, false);\n        /**\n        * Called upon removal.\n        */\n        var remove = function() {\n            var c = canvasWrapper.canvas;\n            if (c.getActiveObject()) {\n                c.remove(c.getActiveObject());\n            }\n            eventAggregator.notify('TOOL_USAGE', CONST.TOOL.REMOVE, 'inactive');\n        };\n\n        eventAggregator.subscribeTo(CONST.TOOL.REMOVE, 'RemoveTool', remove);\n\n        eventAggregator.subscribeTo('keydown', 'RemoveTool', function(topic, sender, keyCode) {\n                if (keyCode === 46) {\n                    remove();\n                }\n            });\n\n        canvasWrapper.canvas.on('object:selected', function(o) {\n            eventAggregator.notify('tool-enabled', CONST.TOOL.REMOVE, true);\n        });\n        canvasWrapper.canvas.on('selection:cleared', function(o) {\n            eventAggregator.notify('tool-enabled', CONST.TOOL.REMOVE, false);\n        });\n    }\n}\n\nvar toolProps = {\n    label: 'Delete'\n};\n\n/**\n * Register tool at the global redraw.registerTool.\n */\n(new Browser()).getFromWindow('redraw').registerTool(CONST.TOOL.REMOVE, RemoveTool, toolProps);\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/tools/remove-tool.js\n **/","import CONST from '../canvas-const.js';\nimport Browser from '../browser-api.js';\n\nvar editorHeight = 30;\n\n/**\n * A tool to create a text editor in the canvas.\n */\nexport default class TextTool {\n    /**\n     * Tools contructor. Is provided with canvas-wrapper and eventAggregator by contract.\n     * @constructor\n     * @param {Canvas} canvasWrapper - Canvas.\n     * @param {EventAggregator} eventAggregator - Event mediator.\n     */\n    constructor(canvasWrapper, eventAggregator, toolOptions) {\n        var canvas = canvasWrapper.canvas;\n        var editor;\n        eventAggregator.subscribeTo(CONST.TOOL.TEXT, 'TextTool', textTool);\n        eventAggregator.subscribeTo('keydown', 'TextTool', function(topic, sender, keyCode) {\n            if (keyCode === 27) {\n                abort();\n            }\n        });\n    \n        function notify(message) {\n            eventAggregator.notify('TOOL_USAGE', CONST.TOOL.TEXT, message);\n        }\n        \n        function abort() {\n            if (editor) {\n                canvas.remove(editor);\n                editor = undefined;\n                notify('inactive');\n            }\n        }\n        function textTool(topic, sender, payload) {\n            if (payload!=='toolbar-click') {\n                abort();\n                return;\n            }\n            notify('active');\n            editor = new fabric.IText('Click to leave a comment', {\n                fontFamily: toolOptions.fontFamily,\n                fontSize: toolOptions.fontSize,\n                left: 100,\n                top: -40,\n                fill: toolOptions.color,\n                hasControls: false\n            });\n\n            canvas.add(editor);\n\n            var onMove = function(options) {\n                if (editor) {\n                    let pointer = canvas.getPointer(options.e);\n                    editor.set({\n                        'top': pointer.y,\n                        'left': pointer.x\n                    });\n                    editor.setCoords();\n                    canvas.renderAll();\n                }\n            };\n            canvas.on('mouse:move', onMove);\n\n            function detachTextListener() {\n                if (editor) {\n                    canvas.off('mouse:move', onMove);\n                    canvas.off('mouse:up', detachTextListener);\n                    editor.setCoords();\n                    editor = undefined;\n                    canvas.renderAll();\n                    notify('inactive');\n                }\n            }\n            canvas.on('mouse:up', detachTextListener);\n        }\n    }\n}\n\n/** Default options for tools initialization */\nvar toolProps = {\n    label: 'Text',\n    fontFamily: 'arial',\n    fontSize: 18,\n    color:CONST.DEFAULT_COLOR,\n};\n(new Browser()).getFromWindow('redraw').registerTool(CONST.TOOL.TEXT, TextTool, toolProps);\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/tools/text.js\n **/"],"sourceRoot":""}