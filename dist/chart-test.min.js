!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.rechart=e():t.rechart=e()}(this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){o(1),o(7),o(8),o(9),o(10),o(11),o(12),t.exports=o(13)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){for(var e=atob(t.split(",")[1]),o=[],n=0;n<e.length;n++)o.push(e.charCodeAt(n));return new Blob([new Uint8Array(o)],{type:"image/png"})}function s(t,e){if(e&&e.tools){var o={};for(var n in e.tools){var i=e.tools[n];o[i]=t[i]}return o}return t}function r(t,e,o,n){var i={};for(var a in t[n].options)t[n].options.hasOwnProperty(a)&&(e[n]&&e[n]&&e[n].hasOwnProperty(a)?i[a]=e[n][a]:g.indexOf(a)>-1&&o.hasOwnProperty(a)?i[a]=o[a]:i[a]=t[n].options[a]);return i}var c=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),l=o(2),u=n(l),f=o(3),d=n(f),h=o(5),v=n(h),b=o(6),p=n(b),m={tools:{}},g=["color","activeColor"],y=function(){function t(e,o){i(this,t),this.events=new v["default"],o=o||{},this._canvas=new d["default"](e,this.events,o),o.jsonContent&&this._canvas.loadFromJSON(o.jsonContent),this.controls=this.initializeTools(this.events,o)}return c(t,[{key:"getDataUrlForExport",value:function(){return this._canvas.canvas.deactivateAllWithDispatch(),this._canvas.canvas.toDataURL({format:"png",multiplier:1/this._canvas.scale})}},{key:"toBase64URL",value:function(){return this.getDataUrlForExport()}},{key:"toDataBlob",value:function(){return a(this.getDataUrlForExport())}},{key:"toJson",value:function(t){this.controls.cancelActiveTool();var e=this._canvas.canvas.toObject(["lockMovementX","lockMovementY","lockRotation","lockScalingX","lockScalingY","lockUniScaling","hasControls","hasRotatingPoint","selectable","fill","padding"]);return t||delete e.backgroundImage,JSON.stringify(e)}},{key:"fromJson",value:function(t){this._canvas.loadFromJSON(t)}},{key:"isEmpty",value:function(){return 0===this._canvas.getAllObjects().length}},{key:"isDirty",value:function(){return this._canvas.canvasIsDirty}},{key:"getCanvas",value:function(){return this._canvas.canvas}},{key:"on",value:function(t,e,o,n){this.events.subscribeTo(t,"cx-"+o,e,n)}},{key:"off",value:function(t,e){this.events.unsubscribeTo(t,"cx-"+e)}},{key:"initializeTools",value:function(t,e){e.toolSettings=e.toolSettings||{};var o=s(m.tools,e);for(var n in o){var i=r(m.tools,e.toolSettings,e,n);m.tools[n].options=i,new m.tools[n].toolFn(this._canvas,t,i)}var a=new p["default"](t,e);return a.setupTools(o,this._canvas.canvasContainer,e),a}}]),t}();m.Annotation=y,m.registerTool=function(t,e,o){m.tools[t]={address:t,toolFn:e,options:o},m.tools[t].options.buttonCss=m.tools[t].options.buttonCss||""},(new u["default"]).appendToWindow("redraw",m)},function(t,e){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),i="undefined"!=typeof window,a=function(){function t(){o(this,t),this.document=i?document:{},this.window=i?window:{}}return n(t,[{key:"appendToWindow",value:function(t,e){return i?(window[t]=e,!0):!1}},{key:"getFromWindow",value:function(t){return window?window[t]:{getFromWindow:function(){},tools:[]}}}]),t}();e["default"]=a},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){function o(){e.canvasIsDirty=!0,t.off("object:added",o),t.off("object:selected",o)}t.off("object:added",o),t.off("object:selected",o),e.canvasIsDirty=!1,t.on("object:added",o),t.on("object:selected",o)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),r=o(4),c=n(r),l=function(){function t(e,o,n){i(this,t),this.options=n,this.eventAggregator=o;var s=e.parentNode,r=document.createElement("div");r.className=c["default"].CSS.PARENT,this.scale=1,s.insertBefore(r,e),s.removeChild(e);var l=document.createElement("canvas");r.appendChild(l),this.canvasElem=l,this.canvasContainer=r,this.canvasLeft=l.offsetLeft,this.canvas=new fabric.Canvas(l),this.imgElement=e;var u=this,f=function(){u.setupImage()},d=new Image;d.addEventListener("load",f,!1),d.src=this.imgElement.src,a(this.canvas,this)}return s(t,[{key:"setupImage",value:function(){function t(t){return function(){t.renderAll(),o.notify("canvas-loaded","CANVAS")}}if(this.image=new fabric.Image(this.imgElement),this.options.maxWidth&&this.options.maxWidth<this.image.width&&(this.scale=this.options.maxWidth/this.image.width),this.options.maxHeight&&this.options.maxHeight<this.image.height){var e=this.options.maxHeight/this.image.height;this.scale>e&&(this.scale=e)}this.width=this.scale*this.imgElement.width,this.height=this.scale*this.imgElement.height,this.canvas.setDimensions({width:this.width,height:this.height}),this.image.setScaleX(this.scale),this.image.setScaleY(this.scale);var o=this.eventAggregator;if(this.canvas.setBackgroundImage(this.image,t(this.canvas),{}),this.options.maxWidth&&this.options.maxWidth<this.image.width&&(this.scale=this.options.maxWidth/this.image.width),this.options.maxHeight&&this.options.maxHeight<this.image.height){var n=this.options.maxHeight/this.image.height;this.scale>n&&(this.scale=n)}this.eventAggregator.subscribeTo("TOOL_USAGE","toolbar",function(t,e,o){"active"===o?this.canvas.defaultCursor="crosshair":this.canvas.defaultCursor="default"},this)}},{key:"loadFromJSON",value:function(t){this.canvas.clear(),this.canvas.loadFromJSON(t,this.canvas.renderAll.bind(this.canvas)),a(this.canvas,this)}},{key:"getCanvasTop",value:function(){return this.canvasContainer.offsetTop}},{key:"getAllObjects",value:function(){return this.canvas.getObjects()}},{key:"enableSelection",value:function(t){this.canvas.selection=t,this.canvas.forEachObject(function(e){e.selectable=t})}}]),t}();e["default"]=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={TOOL:{ARROW:"arrow",BOX:"box",PIXELATE:"pixel",CLEAR:"clear",DUMP:"dump",HLINE:"hline",REMOVE:"delete",TEXT:"text"},DEFAULT_COLOR:"#33e",CSS:{PARENT:"redraw_parent",TOOLBAR:"redraw_toolbar",BUTTON:"redraw_btn",ACTIVE_BUTTON:"active"}}},function(t,e){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),i=function(){function t(){o(this,t),this.subscriptionsByTopic={}}return n(t,[{key:"subscribeTo",value:function(t,e,o,n){this.subscriptionsByTopic[t]||(this.subscriptionsByTopic[t]=[]),this.subscriptionsByTopic[t].push({subscriber:e,callbackFn:o,invokationScope:n})}},{key:"unsubscribeTo",value:function(t,e){for(var o in this.subscriptionsByTopic[t])this.subscriptionsByTopic[t][o].subscriber===e&&this.subscriptionsByTopic[t].splice(o,1)}},{key:"notify",value:function(t,e,o){for(var n in this.subscriptionsByTopic[t]){var i=void 0;this.subscriptionsByTopic[t][n].invokationScope&&(i=this.subscriptionsByTopic[t][n].invokationScope),this.subscriptionsByTopic[t][n].callbackFn.apply(i,[t,e,o])}}}]),t}();e["default"]=i},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(e){var o=e.split(" ");o.forEach(function(e){t.classList.add(e)})}}Object.defineProperty(e,"__esModule",{value:!0});var s=o(4),r=n(s),c=function l(t,e){function o(e){return function(){n&&t.notify(n,"toolbar","toolbar-deactivate"),n!==e?(n=e,t.notify(e,"toolbar","toolbar-click")):n=void 0}}i(this,l),this.toolsInUse={};var n;this.cancelActiveTool=function(){n&&(t.notify(n,"toolbar","toolbar-deactivate"),n=void 0)};var s=function(e){46!==e.keyCode&&27!==e.keyCode||t.notify("keydown","toolbar",e.keyCode)};window.addEventListener("keydown",s,!1),this.setupTools=function(i,s,c){var l=document.createElement("div");a(l,r["default"].CSS.TOOLBAR),a(l,e.toolbarCss),c.toolbarFirst===!0?s.insertBefore(l,s.firstChild):s.appendChild(l);for(var u in i){var f=document.createElement("button");f.innerHTML=i[u].options.label,f.classList.add(r["default"].CSS.BUTTON),a(f,c.buttonCss),a(f,i[u].options.buttonCss),f.onclick=o(i[u].address),this.toolsInUse[i[u].address]=f,l.appendChild(f)}var d=c.buttonActiveCss||r["default"].CSS.ACTIVE_BUTTON;t.subscribeTo("TOOL_USAGE","toolbar",function(t,e,o){var i=this.toolsInUse[e];"active"!==o?(e===n&&(n=void 0),i.classList.remove(d)):i.classList.add(d)},this),t.subscribeTo("tool-enabled","toolbar",function(t,e,o){o?this.toolsInUse[e].classList.remove("disabled"):this.toolsInUse[e].classList.add("disabled")},this)}};e["default"]=c},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a,s=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),r=o(4),c=n(r),l=o(2),u=n(l),f=20,d=function(){function t(e,o,n,a){i(this,t),console.log("##### alpha *******************"),this.eventAggregator=o,this.canvasWrapper=e,this.arrow=this.canvas=this.start=this.end=void 0,this.options=n;var s=this;console.log("##### bravo"),this.eventAggregator.subscribeTo(c["default"].TOOL.ARROW,"ArrowTool",function(){s.initListeners.apply(s,arguments)}),this.canvas=e.canvas,this.moveFn=function(t){s.onMove(t)},this.downFn=function(t){s.onMouseDown(t)},this.upFn=function(t){s.onMUP(t)},this.notify=function(t){this.eventAggregator.notify("TOOL_USAGE",c["default"].TOOL.ARROW,t)},this.done=function(){this.canvasWrapper.enableSelection(!0),this.removeCanvasListeners(),this.notify("inactive")},console.log("##### charlie")}return s(t,[{key:"moveArrowIndicator",value:function(t){var e=t[0],o=t[1],n=t[2],i=t[3],a=n-e,s=i-o,r=Math.atan2(s,a);r*=180/Math.PI,r+=90,this.arrow&&this.canvas.remove(this.arrow),this.arrow=new fabric.Triangle({angle:r,fill:this.options.activeColor,top:i,left:n,height:f,width:f,originX:"center",originY:"center",selectable:!1}),this.canvas.add(this.arrow)}},{key:"abort",value:function(){this.arrow&&(this.canvas.remove(this.arrow),this.arrow=void 0),a&&(this.canvas.remove(a),a=void 0),this.eventAggregator.unsubscribeTo("keydown","ArrowTool"),this.done()}},{key:"onMove",value:function(t){if(this.start&&!this.end){var e=this.canvas.getPointer(t.e);a.set({x2:e.x}),a.set({y2:e.y}),this.moveArrowIndicator([this.start.left,this.start.top,e.x,e.y])}this.canvas.renderAll()}},{key:"onMUP",value:function(t){var e=this.canvas.getPointer(t.e);this.end={top:e.y,left:e.x};var o=Math.abs(this.end.top-this.start.top)+Math.abs(this.end.left-this.start.left);if(o>10){this.arrow&&(this.arrow.fill=this.options.color);var n=new fabric.Group([a,this.arrow],{hasControls:!1,hasBorders:!0,selectable:!1,fill:this.options.color});a.stroke=this.options.color,this.canvas.add(n)}this.canvas.remove(a),this.canvas.remove(this.arrow),this.arrow=a=this.start=this.end=void 0,this.canvas.renderAll()}},{key:"onMouseDown",value:function(t){var e=this.canvas.getPointer(t.e);this.start={top:e.y,left:e.x},a=new fabric.Line([this.start.left,this.start.top,this.start.left,this.start.top],{strokeWidth:5,stroke:this.options.activeColor,originX:"center",originY:"center",hasControls:!1,hasBorders:!0,selectable:!0}),this.canvas.add(a)}},{key:"initListeners",value:function(t,e,o){if("toolbar-deactivate"===o)return void this.abort();var n=this;this.eventAggregator.subscribeTo("keydown","ArrowTool",function(t,e,o){27===o&&n.abort.apply(n)}),this.start=this.end=void 0,this.canvasWrapper.enableSelection(!1),this.notify("active"),this.canvas.on("mouse:down",this.downFn),this.canvas.on("mouse:move",this.moveFn),this.canvas.on("mouse:up",this.upFn)}},{key:"removeCanvasListeners",value:function(){this.canvas.off("mouse:down",this.downFn),this.canvas.off("mouse:move",this.moveFn),this.canvas.off("mouse:up",this.upFn)}}]),t}();e["default"]=d;var h={label:"Arrow",color:c["default"].DEFAULT_COLOR,activeColor:"#55f"};u["default"].getFromWindow("redraw").registerTool(c["default"].TOOL.ARROW,d,h)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a,s=o(4),r=n(s),c=o(2),l=n(c),u=function d(t,e,o){function n(t){e.notify("TOOL_USAGE",r["default"].TOOL.BOX,t)}function s(){n("inactive"),c(),t.enableSelection(!0)}function c(){y.off("mouse:down",f),y.off("mouse:move",l),y.off("mouse:up",u),a=void 0,e.unsubscribeTo("keydown","BoxTool")}function l(t){if(a){var e=y.getPointer(t.e);v=e.x-m,b=e.y-p,a.set({width:v}),a.set({height:b}),a.setCoords(),y.renderAll()}}function u(t){return y.off("mouse:move",l),y.off("mouse:up",u),Math.abs(v)<5&&Math.abs(b)<5?void y.remove(a):(a.set({opacity:.5}),void y.renderAll())}function f(t){var e=y.getPointer(t.e);v=b=0,p=e.y,m=e.x,a=new fabric.Rect({left:m,top:p,width:4,borderColor:o.color,height:4,fill:o.color,opacity:.3,hasControls:!0,hasRotatingPoint:!1,originX:"left",originY:"top",selectable:!1}),y.add(a),a.setCoords(),y.renderAll(),y.on("mouse:move",l),y.on("mouse:up",u)}function h(o,i,a){return"toolbar-deactivate"===a?void s():(e.subscribeTo("keydown","BoxTool",function(t,e,o){27===o&&s()},g),t.enableSelection(!1),n("active"),void y.on("mouse:down",f))}i(this,d),e.subscribeTo(r["default"].TOOL.BOX,"BoxTool",h);var v,b,v,b,p,m,g=this,y=t.canvas};e["default"]=u;var f={label:"Box",color:r["default"].DEFAULT_COLOR};(new l["default"]).getFromWindow("redraw").registerTool(r["default"].TOOL.BOX,u,f)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=o(4),s=n(a),r=o(2),c=n(r),l=function f(t,e,o){function n(t){e.notify("TOOL_USAGE",s["default"].TOOL.PIXELATE,t)}function a(){n("inactive"),r(),t.enableSelection(!0)}function r(){g.off("mouse:down",d),g.off("mouse:move",c),g.off("mouse:up",u),v=void 0,e.unsubscribeTo("keydown","PixelateTool")}function c(t){if(v){var e=g.getPointer(t.e),o=e.x-m,n=e.y-p;v.set({width:o,height:n}),v.setCoords(),g.renderAll()}}function l(t,e,o){o.filters[t]=e,o.applyFilters(g.renderAll.bind(g))}function u(e){g.off("mouse:move",c),g.off("mouse:up",u),g.remove(v);var o=g.getPointer(e.e),n=o.x-m,i=o.y-p;if(Math.abs(n)>0&&Math.abs(i)>0){var a=(g.getContext().getImageData(o.x,o.y,n,i),fabric.util.object.clone(t.image));a.set({originX:"left",originY:"top",left:0,top:0,lockMovementX:!0,lockMovementY:!0});var s=v;v.left=v.left-a.width/2,v.top=v.top-a.height/2,a.clipTo=function(t){s.render(t)};var r=fabric.Image.filters;l(0,new r.Pixelate({blocksize:5}),a),g.add(a),g.sendToBack(a)}g.renderAll(),v=void 0}function d(t){var e=g.getPointer(t.e);p=e.y,m=e.x,v=new fabric.Rect({left:m,top:p,width:4,borderColor:o.color,height:4,fill:o.color,opacity:.3,hasControls:!0,hasRotatingPoint:!1,originX:"left",originY:"top",selectable:!1}),g.add(v),v.setCoords(),g.renderAll(),g.on("mouse:move",c),g.on("mouse:up",u)}function h(o,i,s){return"toolbar-deactivate"===s?void a():(e.subscribeTo("keydown","PixelateTool",function(t,e,o){27===o&&a()},b),t.enableSelection(!1),n("active"),void g.on("mouse:down",d))}i(this,f),e.subscribeTo(s["default"].TOOL.PIXELATE,"PixelateTool",h);var v=void 0,b=this,p=void 0,m=void 0,g=t.canvas};e["default"]=l;var u={label:"Pixelate",color:s["default"].DEFAULT_COLOR};(new c["default"]).getFromWindow("redraw").registerTool(s["default"].TOOL.PIXELATE,l,u)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=o(4),s=n(a),r=o(2),c=n(r),l=function f(t,e){function o(t,o,i){"toolbar-deactivate"!==i&&confirm("This will restore your image to its default state.\nAll your modifications will be deleted.\nDo you want to continue?")&&n(),e.notify("TOOL_USAGE",s["default"].TOOL.CLEAR,"inactive")}function n(){for(var e=t.canvas,o=e.getObjects(),n=o.length-1;n>=0;n--)e.remove(o[n])}i(this,f),e.subscribeTo(s["default"].TOOL.CLEAR,"ResetTool",o)};e["default"]=l;var u={label:"Clear"};(new c["default"]).getFromWindow("redraw").registerTool(s["default"].TOOL.CLEAR,l,u)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=o(4),s=n(a),r=o(2),c=n(r),l=function f(t,e,o){function n(t){e.notify("TOOL_USAGE",s["default"].TOOL.HLINE,t)}function a(){return new fabric.Line([0,0,l.width,0],{left:0,top:1,hasControls:!1,lockMovementX:!0,opacity:.7,padding:4,stroke:o.color,strokeWidth:2})}function r(t,o,i){function s(){l.remove(c),c=void 0,r(),n("inactive")}function r(){l.off("mouse:move",u),l.off("mouse:up",f)}if("toolbar-click"!==i)return void s();n("active"),c=a(),l.add(c),e.subscribeTo("keydown","HorizontalLine",function(t,e,o){27===o&&s()});var u=function(t){c&&(c.set({top:l.getPointer(t.e).y}),c.setCoords(),l.renderAll())};l.on("mouse:move",u);var f=function(t){c=a(),l.add(c)};l.on("mouse:up",f)}i(this,f);var c,l=t.canvas;e.subscribeTo(s["default"].TOOL.HLINE,"HorizontalLineTool",r)};e["default"]=l;var u={label:"Limit line",color:s["default"].DEFAULT_COLOR,activeColor:"#55f"};(new c["default"]).getFromWindow("redraw").registerTool(s["default"].TOOL.HLINE,l,u)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=o(4),s=n(a),r=o(2),c=n(r),l=function f(t,e){i(this,f),e.notify("tool-enabled",s["default"].TOOL.REMOVE,!1);var o=function(){var o=t.canvas;o.getActiveObject()&&o.remove(o.getActiveObject()),e.notify("TOOL_USAGE",s["default"].TOOL.REMOVE,"inactive")};e.subscribeTo(s["default"].TOOL.REMOVE,"RemoveTool",o),e.subscribeTo("keydown","RemoveTool",function(t,e,n){46===n&&o()}),t.canvas.on("object:selected",function(t){e.notify("tool-enabled",s["default"].TOOL.REMOVE,!0)}),t.canvas.on("selection:cleared",function(t){e.notify("tool-enabled",s["default"].TOOL.REMOVE,!1)})};e["default"]=l;var u={label:"Delete"};(new c["default"]).getFromWindow("redraw").registerTool(s["default"].TOOL.REMOVE,l,u)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=o(4),s=n(a),r=o(2),c=n(r),l=function f(t,e,o){function n(t){e.notify("TOOL_USAGE",s["default"].TOOL.TEXT,t)}function a(){c&&(l.remove(c),c=void 0,n("inactive"))}function r(t,e,i){function s(){c&&(l.off("mouse:move",r),l.off("mouse:up",s),c.setCoords(),c=void 0,l.renderAll(),n("inactive"))}if("toolbar-click"!==i)return void a();n("active"),c=new fabric.IText("Click to leave a comment",{fontFamily:o.fontFamily,fontSize:o.fontSize,left:100,top:-40,fill:o.color,hasControls:!1}),l.add(c);var r=function(t){if(c){var e=l.getPointer(t.e);c.set({top:e.y,left:e.x}),c.setCoords(),l.renderAll()}};l.on("mouse:move",r),l.on("mouse:up",s)}i(this,f);var c,l=t.canvas;e.subscribeTo(s["default"].TOOL.TEXT,"TextTool",r),e.subscribeTo("keydown","TextTool",function(t,e,o){27===o&&a()})};e["default"]=l;var u={label:"Text",fontFamily:"arial",fontSize:18,color:s["default"].DEFAULT_COLOR};(new c["default"]).getFromWindow("redraw").registerTool(s["default"].TOOL.TEXT,l,u)}])});
//# sourceMappingURL=chart-test.min.js.map
