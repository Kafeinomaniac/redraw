{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 727910a48118026bc9dd","webpack:///./src/js/redraw.js","webpack:///./src/js/browser-api.js","webpack:///./src/js/canvas-wrapper.js","webpack:///./src/js/canvas-const.js","webpack:///./src/js/event-aggregator.js","webpack:///./src/js/controls/controls-dispatcher.js"],"names":[],"mappings":"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","file":"redraw.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"chartpen\"] = factory();\n\telse\n\t\troot[\"chartpen\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 727910a48118026bc9dd\n **/","import Browser from './browser-api.js';\nimport Canvas from './canvas-wrapper.js';\nimport EventAggregator from './event-aggregator.js';\nimport ControlsDispatcher from './controls/controls-dispatcher.js';\n\n/**\n * Namespace-root, that will be set to window-Object.\n * @access private\n */\nvar redrawNs = {\n    tools: {}\n};\n\n/**\n * Makes a blob from eg base64-string.\n * @access private\n * @param data {string} encodedData - to encode\n * @returns {Blob} results\n */\nfunction dataURItoBlob(encodedData) {\n    var decodedData = atob(encodedData.split(',')[1]);\n    var array = []; // 8-bit unsigned array\n    for (var i = 0; i < decodedData.length; i++) {\n        array.push(decodedData.charCodeAt(i));\n    }\n    return new Blob([new Uint8Array(array)], {\n        type: 'image/png'\n    });\n}\n\n/**\n * If the user has defined the options.tools, then use this to\n * extract the sepcified subset from allTools.\n * @access private\n * @param {Object[]} allTools - should be tools to pick from.\n * @param {Object} options - with or without property tools.\n * @returns {Object} containing all or the selected tools.\n */\nfunction getToolsFromUserSettings(allTools, options) {\n\n    if (options && options.tools) {\n        var definedTools = {};\n        for (let t in options.tools) {\n            let toolName = options.tools[t];\n            definedTools[toolName] = allTools[toolName];\n        }\n        return definedTools;\n    } else {\n        return allTools;\n    }\n}\n\n/**\n * Defines the options-properties allowed to infect all tools-settings.\n * @access private\n */\nvar globalOverrides = ['color', 'activeColor'];\n\n/**\n * Figures out which options should be applied for a particular toolName.\n * @access private\n * @param {Object} allProps - already defined options, that shold not be lost, but perhaps\n * replaced if defined in precedenceProps or globalOptions.\n * @param {Object} precedenceProps - that may have a property named toolName, that will\n * replace options from allProps.\n * @param {Object} globalOptions - top-level options that will overwrite allProp but not precedenceProps\n * @param {string} toolName - name of the tool, which options is processed\n * @returns {Object} with tool applies options\n */\nfunction overwriteProps(allProps, precedenceProps, globalOptions, toolName) {\n    var results = {};\n\n    for (var p in allProps[toolName].options) {\n        if (allProps[toolName].options.hasOwnProperty(p)) {\n            if (precedenceProps[toolName] && precedenceProps[toolName] && precedenceProps[toolName].hasOwnProperty(p)) {\n                results[p] = precedenceProps[toolName][p];\n            } else if (globalOverrides.indexOf(p) > -1 && globalOptions.hasOwnProperty(p)){\n                results[p] = globalOptions[p];\n            } else {\n                results[p] = allProps[toolName].options[p];\n            }\n        }\n    }\n    return results;\n}\n\n/**\n * Main module, and the only public api for usage.\n * @module redraw\n */\nclass Redraw {\n    /**\n     * Redraw constructor. Bootstraps the canvas and tools.\n     * @constructor\n     * @param {Object} imgElement - The dom element that holds the image.\n     * @param {Object} options - Options.\n     */\n    constructor(imgElement, options) {\n        this.events = new EventAggregator();\n        options = options || {};\n        this._canvas = new Canvas(imgElement, this.events, options); // Needs defactor\n\n        if (options.jsonContent) {\n            this._canvas.loadFromJSON(options.jsonContent);\n        }\n\n        this.controls = this.initializeTools(this.events, options);\n    }\n    /**\n     * Get the png-representation of the canvas.\n     * @access public\n     * @returns {string} with base64 encoded png.\n     */\n    getDataUrlForExport() {\n        this._canvas.canvas.deactivateAllWithDispatch();\n        return this._canvas.canvas.toDataURL(\n            {\n                format:'png',\n                multiplier: 1/this._canvas.scale\n            });\n    }\n\n    /**\n     * Get the base64-encoded png-representation of the canvas.\n     * @access public\n     * @returns {string} with base64 encoded png.\n     */\n    toBase64URL() {\n        return this.getDataUrlForExport();\n    }\n\n    /**\n     * Get the binary png-representation of the canvas.\n     * @access public\n     * @returns {Blob} with canvas as png.\n     */\n    toDataBlob() {\n        return dataURItoBlob(this.getDataUrlForExport());\n    }\n\n    /**\n     * Get the json-representation of the canvas.\n     * @access public\n     * @param {boolean} includeImage - true if background-image should be included in the json.\n     * @returns {string} with json.\n     */\n    toJson(includeImage) {\n        this.controls.cancelActiveTool();\n        var jsObj = this._canvas.canvas.toObject(['lockMovementX', 'lockMovementY',\n            'lockRotation', 'lockScalingX', 'lockScalingY', 'lockUniScaling',\n            'hasControls', 'hasRotatingPoint', 'selectable', 'fill', 'padding']);\n\n\n        if (!includeImage) {\n            delete jsObj.backgroundImage;\n        }\n        return JSON.stringify(jsObj);\n    }\n\n    /**\n     * Resets image and loads content from provided json.\n     * @access public\n     * @param {string} jsonRepresentation - to provide as current state of the canvas.\n     */\n    fromJson(jsonRepresentation) {\n        this._canvas.loadFromJSON(jsonRepresentation);\n    }\n\n    /**\n     * Tells whether or not any objects are present in the canvas, i.e. arrows, rectangles other than the image itself.\n     * @access public\n     * @returns {boolean} true if there are obejcts, i.e.\n     */\n    isEmpty() {\n        return (this._canvas.getAllObjects().length === 0);\n    }\n\n    isDirty() {\n        return true;\n    }\n\n\n    /**\n     * Returns the canvas representation, as is from Fabric.js\n     * @access public\n     * @returns {Object} canvas, see http://fabricjs.com/.\n     */\n    getCanvas() {\n        return this._canvas.canvas;\n    }\n\n    on(topic, callbackFn, subscriberId, scope) {\n        this.events.subscribeTo(topic, 'cx-' + subscriberId, callbackFn, scope);\n    }\n\n    off(topic, subscriberId) {\n        this.events.unsubscribeTo(topic, 'cx-' + subscriberId);\n    }\n\n    /**\n     * Initializes all selected tools.\n     * @param {EventAggregator} events - used for all mediated communications.\n     * @param {Object} options - settings for all tools.\n     */\n    initializeTools(events, options) {\n        var localToolSettings = {};\n        options.toolSettings = options.toolSettings || {};\n        var toolsInUse = getToolsFromUserSettings(redrawNs.tools, options);\n\n        for (var toolName in toolsInUse) {\n            var passedProps = overwriteProps(redrawNs.tools, options.toolSettings, options, toolName);\n\n            redrawNs.tools[toolName].options = passedProps;\n\n            new redrawNs.tools[toolName].toolFn(this._canvas, events, passedProps);\n        }\n        var controls = new ControlsDispatcher(events, options);\n        controls.setupTools(toolsInUse, this._canvas.canvasContainer, options);\n        return controls;\n    }\n}\n\nredrawNs.Annotation = Redraw;\n/**\n * Used by tools to register themselves to be available for usage.\n * @access public\n * @param {string} _name - name of tool.\n * @param {function(canvas: CanvasWrapper, events: EventAggregator, passedProps: Object)} _toolFn - callback function, invoked upon initialization of the tools.\n * @param {Object} _options - options, to be used as default ones.\n */\nredrawNs.registerTool = function(_name, _toolFn, _options) {\n    redrawNs.tools[_name] = {\n        address: _name,\n        toolFn: _toolFn,\n        options: _options\n    };\n    // buttonCss is an attribute that applies to all tools\n    redrawNs.tools[_name].options.buttonCss = redrawNs.tools[_name].options.buttonCss || '';\n};\n\n(new Browser()).appendToWindow('redraw', redrawNs);\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/redraw.js\n **/","var isBrowser = typeof window !== 'undefined';\n\n/**\n * Facade of the browser apis. The main purpose id to facilitate testing.\n */\nexport default class Browser {\n    /**\n     * Contructor that determines if there is a browser present.\n     * @constructor\n     */\n    constructor() {\n        this.document = isBrowser ? document : {};\n        this.window = isBrowser ? window : {};\n    }\n\n    /**\n     * Appends property to the browser window object.\n     * @param {string} attributeName - Name of the property to create/assign.\n     * @param {Object} obj - value to set.\n     */\n    appendToWindow(attributeName, obj) {\n\n        if (isBrowser) {\n            window[attributeName] = obj;\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Use to retrieve property from the browser window object.\n     * @param {string} attributeName - Name of the property to create/assign.\n     * @returns {Object} obj - retrieved value, or mock if not browser.\n     */\n    getFromWindow(attributeName) {\n        if (window) {\n            return window[attributeName];\n        }\n      return {\n        getFromWindow:function() { },\n          tools: []};\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/browser-api.js\n **/","import CONST from './canvas-const.js';\n\n /**\n * Gets the scroll position of a dom element.\n * @access private\n * @param {Object} elem - target element.\n */\nfunction scrollPosition(elem) {\n    var left = 0,\n        top = 0;\n\n    do {\n        left += elem.scrollLeft;\n        top += elem.scrollTop;\n    } while (elem = elem.offsetParent);\n\n    return [left, top];\n}\n\n/**\n * Canvas object that facilitates\n */\nexport default class Canvas {\n     /**\n     * Tools contructor. Is provided with canvas-wrapper and eventAggregator by contract.\n     * @constructor\n     * @param {Object} imgElement - dom element that will be replaced and\n     * used as background for canvas.\n     * @param {EventAggregator} eventAggregator - Event mediator.\n     * @param {Object} options - parameters used to setup looks and all tools preferences.\n     */\n    constructor(imgElement, eventAggregator, options) {\n        this.options = options;\n        this.eventAggregator = eventAggregator;\n        var parent = imgElement.parentNode;\n        var redrawWrapper = document.createElement('div');\n        redrawWrapper.className = CONST.CSS.PARENT;\n        this.scale = 1;\n        parent.insertBefore(redrawWrapper, imgElement);\n        parent.removeChild(imgElement);\n\n        var canvasElem = document.createElement('canvas');\n        let canvasWrapper = document.createElement('div');\n        canvasWrapper.className = CONST.CSS.CANVAS_WRAPPER;\n        canvasWrapper.appendChild(canvasElem);\n        redrawWrapper.appendChild(canvasWrapper);\n\n        this.canvasElem = canvasElem;\n\n        this.canvasContainer = redrawWrapper;\n        this.canvasLeft = canvasElem.offsetLeft;\n        this.canvas = new fabric.Canvas(canvasElem);\n        this.imgElement = imgElement;\n\n        /* wait until the image is surely loaded to make the setup */\n        let theCanvas = this;\n        let delayedSetup = function () {\n            theCanvas.setupImage();\n        };\n        var tmp = new Image();\n        tmp.addEventListener('load', delayedSetup, false);\n        tmp.src = this.imgElement.src;\n    }\n\n    setupImage() {\n        this.image = new fabric.Image(this.imgElement);\n        if (this.options.maxWidth && this.options.maxWidth < this.image.width) {\n            this.scale = this.options.maxWidth / this.image.width;\n        }\n        if (this.options.maxHeight && this.options.maxHeight < this.image.height) {\n            let scaleY = this.options.maxHeight / this.image.height;\n            if (this.scale > scaleY) {\n                this.scale = scaleY;\n            }\n        }\n\n        this.width = this.scale * this.imgElement.width;\n        this.height = this.scale * this.imgElement.height;\n\n        this.canvas.setDimensions({\n            width: this.width,\n            height: this.height\n        });\n\n        this.image.setScaleX(this.scale);\n        this.image.setScaleY(this.scale);\n        var event = this.eventAggregator;\n        function getBinder(_canvas) {\n            return function(){\n                _canvas.renderAll();\n                event.notify('canvas-loaded', 'CANVAS');\n            };\n        }\n        this.canvas.setBackgroundImage(this.image, getBinder(this.canvas), {});\n\n        if (this.options.maxWidth && this.options.maxWidth < this.image.width) {\n            this.scale = this.options.maxWidth / this.image.width;\n        }\n        if (this.options.maxHeight && this.options.maxHeight < this.image.height) {\n            let scaleY = this.options.maxHeight / this.image.height;\n            if (this.scale > scaleY) {\n                this.scale = scaleY;\n            }\n        }\n\n        this.eventAggregator.subscribeTo('TOOL_USAGE', 'toolbar',\n            function(subscriptionId, sender, status) {\n                if (status === 'active') {\n                    this.canvas.defaultCursor='crosshair';\n                } else {\n                    this.canvas.defaultCursor='default';\n                }\n            }, this);\n    }\n\n    loadFromJSON(jsonContent) {\n        this.canvas.clear();\n        this.canvas.loadFromJSON(jsonContent, this.canvas.renderAll.bind(this.canvas));\n    }\n\n    /**\n     * Gets the top position of the canvas dom element.\n     * @access public\n     * @returns {number} position in pixels?\n     */\n    getCanvasTop() {\n        return this.canvasContainer.offsetTop;\n    }\n\n    /**\n     * Gets the array of all objects of the canvas.\n     * @access public\n     * @returns {Array} with canvas object, or undefined if empty.\n     */\n    getAllObjects() {\n        return this.canvas.getObjects();\n    }\n\n    /**\n     * Set/unset whether or not it is possible to select objects of the canvas.\n     * @access pulic\n     * @param {boolean} isEnabled - true if selection is enabled, false otherwise.\n     */\n    enableSelection(isEnabled) {\n        this.canvas.selection = isEnabled; // Restore fabricjs selection-box\n        this.canvas.forEachObject(function(o) {\n            o.selectable = isEnabled;\n        });\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/canvas-wrapper.js\n **/","export default {\n\tTOOL: {\n\t\tARROW: 'arrow',\n\t\tDELETE: 'delete',\n\t\tHORIZONTAL_LINE: 'horizontalLine',\n\t\tPIXELATE: 'pixelate',\n\t\tRECTANGLE: 'rectangle',\n\t\tRESET: 'reset',\n\t\tTEXT: 'text'\n\t},\n\tDEFAULT_COLOR: '#33e',\n\tCSS: {\n\t\tACTIVE_BUTTON: 'active',\n\t\tBUTTON: 'redraw_btn',\n\t\tPARENT: 'redraw_parent',\n\t\tTOOLBAR: 'redraw_toolbar',\n    CANVAS_WRAPPER: 'redraw_canvas'\n\t}\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/canvas-const.js\n **/","/**\n* Mediator for events.\n*/\nexport default class EventAggregator {\n    /**\n     * Contructor that initializes internal stuff.\n     * @constructor\n     */\n    constructor() {\n        this.subscriptionsByTopic = {};\n    }\n\n    /**\n     * Registers a subscriber for a specific event topic.\n     * @param {string} topic - name of the event type / topic.\n     * @param {string} subscriberId - id the subscriber, must be unique.\n     * @param {function(topic: string, sender: string, payload: Object)} onNotifyFn - callback\n     * invoked upon when upon notification.\n     * @param {Object} [_invokationScope] - scope to be used when invoking callback.\n     */\n    subscribeTo(topic, subscriberId, onNotifyFn, _invokationScope) {\n        if (!this.subscriptionsByTopic[topic]) {\n            this.subscriptionsByTopic[topic] = [];\n        }\n\n        this.subscriptionsByTopic[topic].push({subscriber: subscriberId, callbackFn: onNotifyFn, invokationScope: _invokationScope});\n    }\n\n    // ToDo needs test\n    /**\n     * Unregisters a subscriber from a specific event topic.\n     * @param {string} topic - name of the event type / topic.\n     * @param {string} _subscriber - id the unique subscriber.\n     */\n    unsubscribeTo(topic, _subscriber) {\n        for (var j in this.subscriptionsByTopic[topic]) {\n            if (this.subscriptionsByTopic[topic][j].subscriber === _subscriber) {\n                this.subscriptionsByTopic[topic].splice(j, 1);\n            }\n        }\n    }\n\n    /**\n     * Called to notify all subscribers of this topic\n     * @param {string} topic - name of the event type / topic.\n     * @param {string} sender - address of the sender.\n     * @param {Object} payload - any data to pass to the subscriber.\n     */\n    notify(topic, sender, payload) {\n        for (var s2 in this.subscriptionsByTopic[topic]) {\n            var scope = undefined;\n            if (this.subscriptionsByTopic[topic][s2].invokationScope) {\n                scope = this.subscriptionsByTopic[topic][s2].invokationScope;\n            }\n            this.subscriptionsByTopic[topic][s2].callbackFn.apply(scope, [topic, sender, payload]);\n        }\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/event-aggregator.js\n **/","import CONST from '../canvas-const.js';\n\n/**\n * Adds a class to the array of classes.\n * @private\n */\nfunction addClasses(btnObj, classes) {\n    if (!classes) return;\n    var allClasses = classes.split(' ');\n\n    allClasses.forEach((clazz) => {btnObj.classList.add(clazz);})\n}\n\n/**\n * Main manager for the toolbar.\n */\nexport default class ControlsDispatcher {\n    /**\n     * Controls contructor. Is provided with canvas-wrapper and options to initialize to toolbar.\n     * @constructor\n     * @param {EventAggregator} eventAggregator - Event mediator.\n     * @param {Object} options - from user.\n     */\n    constructor(eventAggregator, options) {\n        this.toolsInUse = {};\n        var activeTool, delBtn;\n\n        function notifyActive(topic) {\n            return function() {\n                if (activeTool) {\n                    eventAggregator.notify(activeTool, 'toolbar', 'toolbar-deactivate');\n                }\n                if (activeTool !== topic) {\n                    activeTool = topic;\n                    eventAggregator.notify(topic, 'toolbar', 'toolbar-click');\n                } else {\n                    activeTool = undefined;\n                }\n            };\n        }\n\n        this.cancelActiveTool = function() {\n\n            if (activeTool) {\n                eventAggregator.notify(activeTool, 'toolbar', 'toolbar-deactivate');\n                activeTool = undefined;\n            }\n        };\n\n        var manageKeys = function(e) {\n            if (e.keyCode === 46 || e.keyCode === 27) {\n                eventAggregator.notify('keydown', 'toolbar', e.keyCode);\n            }\n        };\n\n        window.addEventListener('keydown', manageKeys, false);\n\n        this.setupTools = function(tools, domParent, mainOptions) {\n            var container = document.createElement('div');\n\n            addClasses(container, CONST.CSS.TOOLBAR);\n            addClasses(container, options.toolbarCss);\n\n            if (mainOptions.toolbarFirst === true) {\n                domParent.insertBefore(container, domParent.firstChild);\n            } else {\n                domParent.appendChild(container);\n            }\n\n            for (var toolName in tools) {\n                var btn = document.createElement('button');\n                btn.innerHTML = tools[toolName].options.label;\n\n                btn.classList.add(CONST.CSS.BUTTON);\n\n                addClasses(btn, mainOptions.buttonCss);\n                addClasses(btn, tools[toolName].options.buttonCss);\n\n                btn.onclick = notifyActive(tools[toolName].address);\n                this.toolsInUse[tools[toolName].address] = btn;\n                container.appendChild(btn);\n            }\n\n            var btnActiveCss = mainOptions.buttonActiveCss || CONST.CSS.ACTIVE_BUTTON;\n\n            eventAggregator.subscribeTo('TOOL_USAGE', 'toolbar',\n                function(subscriptionId, sender, status) {\n                    var currTool = this.toolsInUse[sender];\n\n                    if (status !== 'active') {\n                        if (sender === activeTool) {\n                            activeTool = undefined;\n                        }\n                        currTool.classList.remove(btnActiveCss);\n                    } else {\n                        currTool.classList.add(btnActiveCss);\n                    }\n                }, this);\n\n            eventAggregator.subscribeTo('tool-enabled', 'toolbar',\n                function(subscriptionId, sender, isEnabled) {\n                    if (isEnabled) {\n                        this.toolsInUse[sender].classList.remove('disabled');\n                    } else {\n                        this.toolsInUse[sender].classList.add('disabled');\n                    }\n                }, this);\n        };\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/controls/controls-dispatcher.js\n **/"],"sourceRoot":""}